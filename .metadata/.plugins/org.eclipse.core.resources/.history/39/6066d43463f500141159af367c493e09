package hr.fer.zemris.java.fractals.complex;

import static org.junit.Assert.*;
import hr.fer.zemris.java.fractals.complex.Complex;

import org.junit.Test;

public class ComplexPolynomialTest {
	private static final double THETA = 1e-9;

	private final static ComplexPolynomial cp = new ComplexPolynomial(
			Complex.ONE_NEG, Complex.ZERO, Complex.ZERO, Complex.ZERO,
			Complex.ONE);
	private final static ComplexPolynomial cp1 = new ComplexPolynomial(Complex.ONE_NEG, Complex.ZERO, Complex.ONE,
			Complex.ZERO, Complex.ZERO);

	@Test
	public void deriveTest() {
		ComplexPolynomial derivative = cp.derive();
		assertEquals("4*z^3", derivative.toString());
	}

	@Test
	public void applyTest() {
		Complex result = cp.apply(new Complex(1, 1));
		assertEquals(0, result.sub(new Complex(-5, 0)).module(), THETA);
	}

	@Test
	public void toStringTest() {
		assertEquals("1*z^4-1", cp.toString());
	}

	@Test
	public void normalizeTest() {
		assertEquals("1*z^2-1", cp1.toString());
	}
	
	@Test
	public void multiplyTest() {
		ComplexPolynomial cp1 = new ComplexPolynomial(Complex.ONE, new Complex(3, 0), new Complex(5, 0));
		ComplexPolynomial cp2 = new ComplexPolynomial(new Complex(3, 0), new Complex(5, 0), new Complex(4,0));
		assertEquals("1*z^2-1", cp1.toString());
	}
	
	@Test
	public void orderTestAfterNormalization() {
		assertEquals(2, cp1.order());
	}
	
	@Test
	public void orderTestWihtoutNormalization() {
		assertEquals(4, cp.order());
	}

	@Test(expected = IllegalArgumentException.class)
	public void constructFailNoFactors() {
		new ComplexPolynomial();
	}

	@Test(expected = IllegalArgumentException.class)
	public void constructFailNoFactorsAfterNormalization() {
		new ComplexPolynomial(Complex.ZERO, Complex.ZERO, Complex.ZERO,
				Complex.ZERO);
	}

}
